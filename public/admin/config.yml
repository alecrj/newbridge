# Complete Netlify CMS Configuration for Sober Living CRM
backend:
  name: git-gateway
  branch: main

media_folder: "public/images"
public_folder: "/images"

# Enable editorial workflow for content approval
publish_mode: editorial_workflow

# Enhanced security and performance
site_url: https://newbridgeliving.netlify.app
display_url: https://newbridgeliving.netlify.app
logo_url: https://newbridgeliving.netlify.app/favicon.svg

collections:
  # RESIDENTS MANAGEMENT
  - name: "residents"
    label: "üè† Residents"
    folder: "src/content/residents"
    create: true
    slug: "{{year}}-{{month}}-{{day}}-{{slug}}"
    fields:
      - {label: "Full Name", name: "fullName", widget: "string"}
      - {label: "Date of Birth", name: "dateOfBirth", widget: "date"}
      - {label: "Move-in Date", name: "moveInDate", widget: "date"}
      - {label: "Facility", name: "facility", widget: "select", options: ["Haven House", "Recovery Villa", "Serenity Manor"]}
      - {label: "Room Number", name: "roomNumber", widget: "string"}
      - {label: "Emergency Contact", name: "emergencyContact", widget: "object", fields: [
          {label: "Name", name: "name", widget: "string"},
          {label: "Phone", name: "phone", widget: "string"},
          {label: "Relationship", name: "relationship", widget: "string"}
        ]}
      - {label: "Insurance Provider", name: "insuranceProvider", widget: "string", required: false}
      - {label: "Sobriety Date", name: "sobrietyDate", widget: "date"}
      - {label: "Program Phase", name: "programPhase", widget: "select", options: ["Phase 1 - Detox", "Phase 2 - Stabilization", "Phase 3 - Independent Living", "Phase 4 - Aftercare"]}
      - {label: "Monthly Rent", name: "monthlyRent", widget: "number"}
      - {label: "Status", name: "status", widget: "select", options: ["Active", "Extended Stay", "Graduated", "Terminated"]}
      - {label: "Case Notes", name: "caseNotes", widget: "text", required: false}
      - {label: "Profile Photo", name: "profilePhoto", widget: "image", required: false}

  # LEADS & INQUIRIES
  - name: "leads"
    label: "üìû Leads & Inquiries"
    folder: "src/content/leads"
    create: true
    slug: "{{year}}-{{month}}-{{day}}-{{slug}}"
    fields:
      - {label: "Full Name", name: "fullName", widget: "string"}
      - {label: "Phone Number", name: "phone", widget: "string"}
      - {label: "Email", name: "email", widget: "string"}
      - {label: "Lead Source", name: "source", widget: "select", options: ["Website", "Google Ads", "Facebook", "Referral", "Walk-in", "Phone Call", "SEO"]}
      - {label: "Preferred Facility", name: "preferredFacility", widget: "select", options: ["Haven House", "Recovery Villa", "Serenity Manor", "Any Available"], required: false}
      - {label: "Insurance Provider", name: "insuranceProvider", widget: "string", required: false}
      - {label: "Previous Treatment", name: "previousTreatment", widget: "text", required: false}
      - {label: "Message/Notes", name: "message", widget: "text"}
      - {label: "Status", name: "status", widget: "select", options: ["new", "contacted", "scheduled", "admitted", "declined", "lost"]}
      - {label: "Priority", name: "priority", widget: "select", options: ["high", "medium", "low"]}
      - {label: "Follow-up Date", name: "followUpDate", widget: "date", required: false}
      - {label: "Assigned Staff", name: "assignedStaff", widget: "string", required: false}

  # STAFF MANAGEMENT
  - name: "staff"
    label: "üë• Staff"
    folder: "src/content/staff"
    create: true
    slug: "{{slug}}"
    fields:
      - {label: "Full Name", name: "fullName", widget: "string"}
      - {label: "Email", name: "email", widget: "string"}
      - {label: "Phone", name: "phone", widget: "string"}
      - {label: "Role", name: "role", widget: "select", options: ["Administrator", "House Manager", "Case Manager", "Counselor", "Support Staff", "Security"]}
      - {label: "Facility Assignment", name: "facilityAssignment", widget: "select", options: ["All Facilities", "Haven House", "Recovery Villa", "Serenity Manor"]}
      - {label: "Hire Date", name: "hireDate", widget: "date"}
      - {label: "Active", name: "active", widget: "boolean", default: true}
      - {label: "Permissions", name: "permissions", widget: "select", multiple: true, options: ["Resident Management", "Lead Management", "Financial Reports", "Clinical Notes", "User Management", "System Settings"]}
      - {label: "Profile Photo", name: "profilePhoto", widget: "image", required: false}
      - {label: "Bio", name: "bio", widget: "text", required: false}

  # FACILITIES
  - name: "facilities"
    label: "üè¢ Facilities"
    folder: "src/content/facilities"
    create: true
    slug: "{{slug}}"
    fields:
      - {label: "Facility Name", name: "facilityName", widget: "string"}
      - {label: "Address", name: "address", widget: "object", fields: [
          {label: "Street", name: "street", widget: "string"},
          {label: "City", name: "city", widget: "string"},
          {label: "State", name: "state", widget: "string"},
          {label: "ZIP", name: "zip", widget: "string"}
        ]}
      - {label: "Capacity", name: "capacity", widget: "number"}
      - {label: "Current Occupancy", name: "currentOccupancy", widget: "number"}
      - {label: "Monthly Rent Range", name: "rentRange", widget: "string"}
      - {label: "Programs Offered", name: "programs", widget: "select", multiple: true, options: ["Detox", "Residential Treatment", "IOP", "PHP", "MAT", "Counseling", "Life Skills"]}
      - {label: "Amenities", name: "amenities", widget: "select", multiple: true, options: ["Private Rooms", "Shared Rooms", "Kitchen", "Laundry", "Transportation", "Gym", "Pool", "WiFi", "Parking"]}
      - {label: "Availability Status", name: "availability", widget: "select", options: ["accepting", "waitlist", "full"]}
      - {label: "Featured", name: "featured", widget: "boolean", default: false}
      - {label: "Description", name: "description", widget: "text"}
      - {label: "Images", name: "images", widget: "list", field: {label: "Image", name: "image", widget: "image"}}
      - {label: "Meta Title", name: "metaTitle", widget: "string", required: false}
      - {label: "Meta Description", name: "metaDescription", widget: "string", required: false}

  # DRUG TESTS & COMPLIANCE
  - name: "drug_tests"
    label: "üß™ Drug Tests"
    folder: "src/content/drug-tests"
    create: true
    slug: "{{year}}-{{month}}-{{day}}-{{resident}}-{{time}}"
    fields:
      - {label: "Resident", name: "resident", widget: "relation", collection: "residents", search_fields: ["fullName"], value_field: "fullName"}
      - {label: "Test Date", name: "testDate", widget: "datetime"}
      - {label: "Test Type", name: "testType", widget: "select", options: ["Urine", "Breathalyzer", "Saliva", "Hair"]}
      - {label: "Result", name: "result", widget: "select", options: ["Pass", "Fail", "Inconclusive", "Refused"]}
      - {label: "Substances Detected", name: "substancesDetected", widget: "select", multiple: true, options: ["None", "Alcohol", "Marijuana", "Cocaine", "Opiates", "Amphetamines", "Benzodiazepines", "Other"], required: false}
      - {label: "Administered By", name: "administeredBy", widget: "relation", collection: "staff", search_fields: ["fullName"], value_field: "fullName"}
      - {label: "Notes", name: "notes", widget: "text", required: false}

  # CASE NOTES
  - name: "case_notes"
    label: "üìù Case Notes"
    folder: "src/content/case-notes"
    create: true
    slug: "{{year}}-{{month}}-{{day}}-{{resident}}-{{time}}"
    fields:
      - {label: "Resident", name: "resident", widget: "relation", collection: "residents", search_fields: ["fullName"], value_field: "fullName"}
      - {label: "Date", name: "date", widget: "datetime"}
      - {label: "Note Type", name: "noteType", widget: "select", options: ["Clinical", "Behavioral", "Operational", "Incident", "Progress", "Violation"]}
      - {label: "Staff Member", name: "staffMember", widget: "relation", collection: "staff", search_fields: ["fullName"], value_field: "fullName"}
      - {label: "Content", name: "content", widget: "text"}
      - {label: "Action Required", name: "actionRequired", widget: "boolean", default: false}
      - {label: "Follow-up Date", name: "followUpDate", widget: "date", required: false}
      - {label: "Confidential", name: "confidential", widget: "boolean", default: false}

  # PAYMENTS & BILLING
  - name: "payments"
    label: "üí∞ Payments"
    folder: "src/content/payments"
    create: true
    slug: "{{year}}-{{month}}-{{day}}-{{resident}}-{{time}}"
    fields:
      - {label: "Resident", name: "resident", widget: "relation", collection: "residents", search_fields: ["fullName"], value_field: "fullName"}
      - {label: "Payment Date", name: "paymentDate", widget: "date"}
      - {label: "Amount", name: "amount", widget: "number", value_type: "float"}
      - {label: "Payment Method", name: "paymentMethod", widget: "select", options: ["Cash", "Check", "Credit Card", "ACH/Bank Transfer", "Money Order", "Insurance"]}
      - {label: "Payment Type", name: "paymentType", widget: "select", options: ["Rent", "Deposit", "Late Fee", "Damages", "Other"]}
      - {label: "Status", name: "status", widget: "select", options: ["Completed", "Pending", "Failed", "Refunded"]}
      - {label: "Reference Number", name: "referenceNumber", widget: "string", required: false}
      - {label: "Notes", name: "notes", widget: "text", required: false}

  # WEBSITE CONTENT
  - name: "pages"
    label: "üìÑ Website Pages"
    folder: "src/content/pages"
    create: true
    slug: "{{slug}}"
    fields:
      - {label: "Title", name: "title", widget: "string"}
      - {label: "Slug", name: "slug", widget: "string"}
      - {label: "Meta Description", name: "metaDescription", widget: "string"}
      - {label: "Body", name: "body", widget: "markdown"}
      - {label: "Featured Image", name: "featuredImage", widget: "image", required: false}
      - {label: "Published", name: "published", widget: "boolean", default: true}

  # BLOG/NEWS
  - name: "blog"
    label: "üì∞ Blog & News"
    folder: "src/content/blog"
    create: true
    slug: "{{year}}-{{month}}-{{day}}-{{slug}}"
    fields:
      - {label: "Title", name: "title", widget: "string"}
      - {label: "Author", name: "author", widget: "relation", collection: "staff", search_fields: ["fullName"], value_field: "fullName"}
      - {label: "Publish Date", name: "publishDate", widget: "date"}
      - {label: "Featured Image", name: "featuredImage", widget: "image"}
      - {label: "Excerpt", name: "excerpt", widget: "text"}
      - {label: "Body", name: "body", widget: "markdown"}
      - {label: "Tags", name: "tags", widget: "list", field: {label: "Tag", name: "tag", widget: "string"}}
      - {label: "Published", name: "published", widget: "boolean", default: false}

  # SETTINGS
  - name: "settings"
    label: "‚öôÔ∏è Site Settings"
    files:
      - label: "General Settings"
        name: "general"
        file: "src/content/settings/general.yml"
        fields:
          - {label: "Site Title", name: "siteTitle", widget: "string"}
          - {label: "Site Description", name: "siteDescription", widget: "text"}
          - {label: "Contact Phone", name: "contactPhone", widget: "string"}
          - {label: "Contact Email", name: "contactEmail", widget: "string"}
          - {label: "Address", name: "address", widget: "object", fields: [
              {label: "Street", name: "street", widget: "string"},
              {label: "City", name: "city", widget: "string"},
              {label: "State", name: "state", widget: "string"},
              {label: "ZIP", name: "zip", widget: "string"}
            ]}
          - {label: "Social Media", name: "socialMedia", widget: "object", fields: [
              {label: "Facebook", name: "facebook", widget: "string", required: false},
              {label: "Instagram", name: "instagram", widget: "string", required: false},
              {label: "LinkedIn", name: "linkedin", widget: "string", required: false}
            ]}

# Custom preview styles
preview_path: "{{slug}}"

# Enhanced editor configuration
editor:
  preview: true
  frame: true

# Custom widgets (if needed)
# For advanced form handling