---
// src/pages/facilities/index.astro - NewBridge Living Facilities (No Fake Data)
import BaseLayout from '../../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

// Get facilities - handle gracefully if no data exists yet
const facilities = await getCollection('facilities').catch(() => []);
---

<BaseLayout 
  title="Sober Living Facilities - NewBridge Living | Fort Lauderdale, FL"
  description="Professional sober living homes in Fort Lauderdale, Florida. Structured environments, 24/7 support staff, and evidence-based recovery programs. View available beds and apply today."
>
  <!-- Hero Section -->
  <section class="relative bg-gradient-to-br from-emerald-900 via-teal-900 to-emerald-800 pt-24 pb-16 overflow-hidden">
    <!-- Background Pattern -->
    <div class="absolute inset-0 opacity-10">
      <div class="absolute inset-0" style="background-image: radial-gradient(circle at 2px 2px, rgba(255,255,255,0.15) 1px, transparent 0); background-size: 40px 40px;"></div>
    </div>
    
    <div class="relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center text-white">
        <h1 class="text-5xl lg:text-6xl font-bold mb-6">
          Our Sober Living
          <span class="block text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-emerald-300">
            Facilities
          </span>
        </h1>
        <p class="text-xl lg:text-2xl text-emerald-100 mb-8 max-w-3xl mx-auto leading-relaxed">
          Safe, structured environments designed for lasting recovery success. Professional staff, proven programs, and a community that cares.
        </p>
        
        <div class="flex flex-wrap justify-center gap-4">
          <a href="#facilities" class="bg-gradient-to-r from-emerald-600 to-teal-600 text-white px-8 py-4 rounded-2xl font-bold text-lg hover:from-emerald-700 hover:to-teal-700 transform hover:scale-105 transition-all duration-300 shadow-lg">
            View Available Homes
          </a>
          <a href="tel:(850)555-HOPE" class="bg-white/10 backdrop-blur-sm text-white px-8 py-4 rounded-2xl font-bold text-lg hover:bg-white/20 border border-white/20 transition-all duration-300">
            Call: (850) 555-HOPE
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Program Features -->
  <section class="py-16 bg-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-12">
        <h2 class="text-3xl font-bold text-gray-900 mb-4">What Makes Our Facilities Different</h2>
        <p class="text-xl text-gray-600 max-w-3xl mx-auto">
          Every NewBridge Living facility is designed with your recovery success in mind.
        </p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
        <!-- 24/7 Professional Staff -->
        <div class="group text-center">
          <div class="bg-emerald-100 rounded-3xl p-8 group-hover:scale-105 transition-transform duration-300 mb-4">
            <div class="bg-emerald-500 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4">
              <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
              </svg>
            </div>
            <h3 class="text-xl font-bold text-gray-900 mb-2">24/7 Staff Support</h3>
            <p class="text-gray-600 text-sm">Professional staff available around the clock for support and emergency situations.</p>
          </div>
        </div>

        <!-- Structured Environment -->
        <div class="group text-center">
          <div class="bg-teal-100 rounded-3xl p-8 group-hover:scale-105 transition-transform duration-300 mb-4">
            <div class="bg-teal-500 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4">
              <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
              </svg>
            </div>
            <h3 class="text-xl font-bold text-gray-900 mb-2">Structured Programs</h3>
            <p class="text-gray-600 text-sm">Daily schedules, accountability measures, and evidence-based recovery programming.</p>
          </div>
        </div>

        <!-- Safe Environment -->
        <div class="group text-center">
          <div class="bg-blue-100 rounded-3xl p-8 group-hover:scale-105 transition-transform duration-300 mb-4">
            <div class="bg-blue-500 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4">
              <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path>
              </svg>
            </div>
            <h3 class="text-xl font-bold text-gray-900 mb-2">Safe & Secure</h3>
            <p class="text-gray-600 text-sm">Drug-free environments with security measures and strict house policies.</p>
          </div>
        </div>

        <!-- Community Support -->
        <div class="group text-center">
          <div class="bg-purple-100 rounded-3xl p-8 group-hover:scale-105 transition-transform duration-300 mb-4">
            <div class="bg-purple-500 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4">
              <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
              </svg>
            </div>
            <h3 class="text-xl font-bold text-gray-900 mb-2">Peer Community</h3>
            <p class="text-gray-600 text-sm">Connect with others in recovery through group activities and shared experiences.</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Facilities Listing -->
  <section id="facilities" class="py-20 bg-gray-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-16">
        <h2 class="text-4xl font-bold text-gray-900 mb-4">Available Facilities</h2>
        <p class="text-xl text-gray-600 max-w-2xl mx-auto">
          Each home is carefully designed to provide a safe, supportive environment for your recovery journey.
        </p>
      </div>

      {facilities.length > 0 ? (
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
          {facilities.map((facility) => (
            <div class="bg-white rounded-2xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-300 border border-gray-200 group">
              <div class="relative h-64 overflow-hidden">
                <img 
                  src={facility.data.images?.[0] || '/images/facilities/placeholder.jpg'} 
                  alt={facility.data.facilityName}
                  class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"
                />
                <div class="absolute top-4 right-4">
                  <div class={`px-3 py-1 rounded-full text-sm font-semibold shadow-lg ${
                    facility.data.availability === 'accepting' ? 'bg-green-500 text-white' :
                    facility.data.availability === 'waitlist' ? 'bg-yellow-500 text-white' :
                    'bg-red-500 text-white'
                  }`}>
                    {facility.data.availability === 'accepting' ? 'Available Now' :
                     facility.data.availability === 'waitlist' ? 'Waitlist' :
                     'Full'}
                  </div>
                </div>
              </div>
              
              <div class="p-6">
                <h3 class="text-2xl font-bold text-gray-900 mb-2">{facility.data.facilityName}</h3>
                <p class="text-gray-600 mb-4 flex items-center">
                  <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                  </svg>
                  {facility.data.location}
                </p>
                
                <div class="flex items-center justify-between mb-4">
                  <span class="text-3xl font-bold text-emerald-600">${facility.data.monthlyRent || 'Call for pricing'}</span>
                  <span class="text-gray-500">{facility.data.capacity} beds</span>
                </div>
                
                <!-- Amenities Preview -->
                {facility.data.amenities && (
                  <div class="mb-4">
                    <div class="flex flex-wrap gap-1">
                      {facility.data.amenities.slice(0, 3).map((amenity) => (
                        <span class="bg-gray-100 text-gray-700 px-2 py-1 rounded text-xs">
                          {amenity}
                        </span>
                      ))}
                      {facility.data.amenities.length > 3 && (
                        <span class="bg-gray-100 text-gray-700 px-2 py-1 rounded text-xs">
                          +{facility.data.amenities.length - 3} more
                        </span>
                      )}
                    </div>
                  </div>
                )}
                
                <div class="space-y-3">
                  <a 
                    href={`/facilities/${facility.data.slug}`}
                    class="block w-full bg-emerald-600 hover:bg-emerald-700 text-white font-semibold py-3 px-4 rounded-xl text-center transition-all duration-300"
                  >
                    View Details
                  </a>
                  <a 
                    href="tel:+1-850-555-HOPE" 
                    class="block w-full border-2 border-emerald-600 text-emerald-600 hover:bg-emerald-600 hover:text-white font-semibold py-3 px-4 rounded-xl text-center transition-all duration-300"
                  >
                    Call About This Home
                  </a>
                </div>
              </div>
            </div>
          ))}
        </div>
      ) : (
        <!-- No Facilities Yet - Coming Soon -->
        <div class="text-center py-20">
          <div class="bg-white rounded-3xl p-12 shadow-lg max-w-2xl mx-auto border border-gray-200">
            <div class="bg-emerald-100 rounded-full w-20 h-20 flex items-center justify-center mx-auto mb-6">
              <svg class="w-10 h-10 text-emerald-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-4m-5 0H3m2 0h3M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path>
              </svg>
            </div>
            
            <h3 class="text-3xl font-bold text-gray-900 mb-4">Facilities Coming Soon</h3>
            <p class="text-xl text-gray-600 mb-8 leading-relaxed">
              We're currently preparing our sober living facilities to provide the highest standard of care. Our homes will be ready soon with professional staff and proven programs.
            </p>
            
            <div class="space-y-4">
              <a 
                href="tel:+1-850-555-HOPE"
                class="block w-full bg-gradient-to-r from-emerald-600 to-teal-600 text-white font-bold py-4 px-6 rounded-xl text-center text-lg hover:from-emerald-700 hover:to-teal-700 transition-all duration-300"
              >
                📞 Call (850) 555-HOPE
              </a>
              <p class="text-gray-600 text-sm">
                Call now to get on our waiting list and be notified when beds become available
              </p>
            </div>
          </div>
        </div>
      )}
    </div>
  </section>

  <!-- Admission Process -->
  <section class="py-20 bg-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-16">
        <h2 class="text-4xl font-bold text-gray-900 mb-4">Simple Admission Process</h2>
        <p class="text-xl text-gray-600 max-w-3xl mx-auto">
          Getting started with NewBridge Living is straightforward. We'll guide you through every step.
        </p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
        <!-- Step 1 -->
        <div class="text-center group">
          <div class="bg-gradient-to-br from-emerald-100 to-teal-100 rounded-3xl p-8 mb-6 group-hover:scale-105 transition-transform duration-300">
            <div class="bg-emerald-500 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4">
              <span class="text-2xl font-bold text-white">1</span>
            </div>
            <h3 class="text-2xl font-bold text-gray-900 mb-4">Initial Contact</h3>
            <p class="text-gray-600 leading-relaxed">
              Call our 24/7 admissions hotline or fill out our online form. We'll discuss your needs and answer questions.
            </p>
          </div>
        </div>

        <!-- Step 2 -->
        <div class="text-center group">
          <div class="bg-gradient-to-br from-blue-100 to-indigo-100 rounded-3xl p-8 mb-6 group-hover:scale-105 transition-transform duration-300">
            <div class="bg-blue-500 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4">
              <span class="text-2xl font-bold text-white">2</span>
            </div>
            <h3 class="text-2xl font-bold text-gray-900 mb-4">Assessment & Planning</h3>
            <p class="text-gray-600 leading-relaxed">
              Complete intake assessment to determine the best facility match and create your personalized recovery plan.
            </p>
          </div>
        </div>

        <!-- Step 3 -->
        <div class="text-center group">
          <div class="bg-gradient-to-br from-purple-100 to-pink-100 rounded-3xl p-8 mb-6 group-hover:scale-105 transition-transform duration-300">
            <div class="bg-purple-500 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4">
              <span class="text-2xl font-bold text-white">3</span>
            </div>
            <h3 class="text-2xl font-bold text-gray-900 mb-4">Move-In & Begin</h3>
            <p class="text-gray-600 leading-relaxed">
              Move into your new sober living home and begin your structured recovery program with full support.
            </p>
          </div>
        </div>
      </div>

      <!-- Call to Action -->
      <div class="text-center mt-16">
        <div class="bg-gradient-to-br from-emerald-600 to-teal-600 rounded-3xl p-8 text-white max-w-4xl mx-auto">
          <h3 class="text-3xl font-bold mb-4">Ready to Get Started?</h3>
          <p class="text-emerald-100 text-lg mb-6 leading-relaxed">
            Don't wait another day. Our admissions team is standing by to help you begin your recovery journey.
          </p>
          
          <div class="flex flex-col sm:flex-row gap-4 justify-center">
            <a 
              href="tel:+1-850-555-HOPE" 
              class="bg-white text-emerald-600 font-bold py-4 px-8 rounded-xl text-lg hover:bg-gray-100 transition-all duration-300"
            >
              📞 Call (850) 555-HOPE
            </a>
            <a 
              href="/#contact-form" 
              class="border-2 border-white text-white font-bold py-4 px-8 rounded-xl text-lg hover:bg-white hover:text-emerald-600 transition-all duration-300"
            >
              Request Information
            </a>
          </div>
          
          <p class="text-emerald-200 text-sm mt-4">
            Available 24/7 • Free consultation • All calls confidential
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- FAQ Section -->
  <section class="py-20 bg-gray-50">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-16">
        <h2 class="text-4xl font-bold text-gray-900 mb-4">Frequently Asked Questions</h2>
        <p class="text-xl text-gray-600">
          Get answers to common questions about our sober living facilities.
        </p>
      </div>

      <div class="space-y-6">
        <!-- FAQ Item 1 -->
        <div class="bg-white rounded-2xl p-6 shadow-lg border border-gray-200">
          <h3 class="text-xl font-bold text-gray-900 mb-3">What is the difference between sober living and treatment?</h3>
          <p class="text-gray-600 leading-relaxed">
            Sober living provides a structured residential environment for people in recovery, while treatment typically involves intensive therapy and medical care. Many residents come to sober living after completing inpatient treatment to continue their recovery in a supportive community setting.
          </p>
        </div>

        <!-- FAQ Item 2 -->
        <div class="bg-white rounded-2xl p-6 shadow-lg border border-gray-200">
          <h3 class="text-xl font-bold text-gray-900 mb-3">How long can I stay in sober living?</h3>
          <p class="text-gray-600 leading-relaxed">
            Length of stay varies based on individual needs and progress. Most residents stay 3-12 months, but we work with each person to determine the right timeline for their recovery goals and transition to independent living.
          </p>
        </div>

        <!-- FAQ Item 3 -->
        <div class="bg-white rounded-2xl p-6 shadow-lg border border-gray-200">
          <h3 class="text-xl font-bold text-gray-900 mb-3">What are the house rules and expectations?</h3>
          <p class="text-gray-600 leading-relaxed">
            All residents must maintain sobriety, attend house meetings, complete assigned chores, follow curfew times, participate in drug testing, and engage respectfully with staff and other residents. Specific rules are provided during the admission process.
          </p>
        </div>

        <!-- FAQ Item 4 -->
        <div class="bg-white rounded-2xl p-6 shadow-lg border border-gray-200">
          <h3 class="text-xl font-bold text-gray-900 mb-3">Do you accept insurance or offer payment plans?</h3>
          <p class="text-gray-600 leading-relaxed">
            We work with most insurance providers and offer flexible payment options. Our admissions team will help verify your benefits and discuss all available payment arrangements during your initial consultation.
          </p>
        </div>
      </div>
    </div>
  </section>
</BaseLayout>