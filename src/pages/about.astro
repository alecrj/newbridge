---
// src/pages/about.astro — NewBridge Living • About (astonishing, themed)
import BaseLayout from '../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

const facilities = await getCollection('facilities').catch(() => []);
const accepting = facilities.filter((f) => f.data.availability === 'accepting');
const waitlist = facilities.filter((f) => f.data.availability === 'waitlist');
const full = facilities.filter((f) => f.data.availability === 'full');

const totalHomes = facilities.length;
const acceptingCount = accepting.length;
const waitlistCount = waitlist.length;
const fullCount = full.length;

const PHONE_DISPLAY = '(850) 555-HOPE';
const PHONE_TEL = 'tel:+18505554673';

const availabilityText = acceptingCount > 0
  ? `${acceptingCount} home${acceptingCount === 1 ? '' : 's'} accepting`
  : (waitlistCount > 0 ? 'Waitlist available' : 'Join the interest list');
---

<BaseLayout
  title="About Us | NewBridge Living — Sober Living in Tallahassee"
  description="Who we are, what we stand for, and how we run our sober living homes in Tallahassee. No fluff — just clear standards and real accountability."
>
  <!-- Skip link -->
  <a href="#main" class="sr-only focus:not-sr-only focus:fixed focus:top-2 focus:left-2 focus:z-50 focus:rounded-md focus:bg-white focus:px-3 focus:py-2 focus:shadow">Skip to content</a>

  <!-- Announcement / availability bar -->
  <section aria-label="Availability" class="bg-emerald-50 text-emerald-900 border-b border-emerald-100">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-2 flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between">
      <p class="text-sm font-medium"><strong>Now accepting applications</strong><span class="mx-2 text-emerald-700">•</span>{availabilityText}</p>
      <div class="flex items-center gap-3">
        <a href="/contact" class="inline-flex items-center rounded-lg bg-emerald-700 px-3 py-1.5 text-sm font-semibold text-white hover:bg-emerald-800 transition">Apply now</a>
        <a href={PHONE_TEL} class="text-sm font-semibold text-emerald-800 hover:underline">{PHONE_DISPLAY}</a>
      </div>
    </div>
  </section>

  <!-- HERO -->
  <header class="relative overflow-hidden">
    <div class="absolute inset-0" style="
      background:
        radial-gradient(1200px 600px at 10% -10%, rgba(16,185,129,.25), transparent 60%),
        radial-gradient(900px 500px at 110% 20%, rgba(45,212,191,.20), transparent 60%),
        linear-gradient(180deg, #064e3b 0%, #065f46 35%, #064e3b 100%);
    "></div>
    <div class="absolute inset-0 opacity-[0.06] mix-blend-soft-light pointer-events-none" style="background-image:url('data:image/svg+xml;utf8,<svg xmlns=%22http://www.w3.org/2000/svg%22 width=%22128%22 height=%22128%22><filter id=%22n%22><feTurbulence type=%22fractalNoise%22 baseFrequency=%220.8%22 numOctaves=%222%22 stitchTiles=%22stitch%22/></filter><rect width=%22100%%22 height=%22100%%22 filter=%22url(%23n)%22 opacity=%220.6%22/></svg>'); background-size: 256px 256px;"></div>

    <div class="relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-20 pb-16 sm:pt-28">
      <div class="grid grid-cols-1 lg:grid-cols-12 gap-10 items-center">
        <div class="lg:col-span-7 text-white">
          <span class="inline-flex items-center gap-2 rounded-full border border-emerald-300/30 bg-white/10 px-3 py-1 text-xs sm:text-sm font-medium text-emerald-100 backdrop-blur">About NewBridge Living</span>
          <h1 class="mt-6 max-w-3xl text-4xl sm:text-5xl md:text-6xl font-extrabold leading-tight tracking-tight">Structure, accountability, and respect — no chaos.</h1>
          <p class="mt-6 max-w-2xl text-lg sm:text-xl text-emerald-100/90">We run sober living the way it should be run: clear standards, consistent enforcement, clean houses, and a community that actually helps you rebuild your life.</p>
          <div class="mt-8 flex flex-wrap gap-4">
            <a href="/facilities" class="group inline-flex items-center justify-center rounded-xl bg-white px-7 py-4 font-semibold text-emerald-900 shadow-lg shadow-emerald-900/20 transition hover:-translate-y-0.5 hover:shadow-xl">View homes<svg class="ml-2 h-5 w-5 transition group-hover:translate-x-0.5" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"/></svg></a>
            <a href={PHONE_TEL} class="inline-flex items-center justify-center rounded-xl border border-emerald-300/40 bg-white/5 px-7 py-4 font-semibold text-white backdrop-blur transition hover:bg-white/10">Call {PHONE_DISPLAY}</a>
          </div>

          <!-- Stats -->
          <div class="mx-auto mt-10 grid w-full max-w-3xl grid-cols-1 gap-4 sm:grid-cols-3">
            <div class="rounded-xl border border-white/10 bg-white/5 p-5 text-center text-emerald-50"><div class="text-sm opacity-80">Total Homes</div><div class="mt-1 text-3xl font-bold">{totalHomes}</div></div>
            <div class="rounded-xl border border-white/10 bg-white/5 p-5 text-center text-emerald-50"><div class="text-sm opacity-80">Accepting</div><div class="mt-1 text-3xl font-bold">{acceptingCount}</div></div>
            <div class="rounded-xl border border-white/10 bg-white/5 p-5 text-center text-emerald-50"><div class="text-sm opacity-80">Waitlist/Full</div><div class="mt-1 text-3xl font-bold">{waitlistCount + fullCount}</div></div>
          </div>
        </div>

        <div class="lg:col-span-5">
          <div class="relative">
            <div class="absolute -inset-4 rounded-[28px] bg-emerald-400/20 blur-2xl"></div>
            <div class="relative rounded-[24px] border border-white/20 bg-white/5 p-4 backdrop-blur shadow-xl">
              <div class="grid grid-cols-2 gap-4">
                <div class="aspect-[4/3] rounded-2xl bg-gradient-to-br from-emerald-100 to-teal-100 border border-white/40"></div>
                <div class="aspect-[4/3] rounded-2xl bg-gradient-to-br from-emerald-100 to-teal-100 border border-white/40"></div>
                <div class="col-span-2 aspect-[7/3] rounded-2xl bg-gradient-to-br from-emerald-100 to-teal-100 border border-white/40"></div>
              </div>
              <p class="mt-4 text-center text-sm text-emerald-50/80">Photo gallery coming soon.</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>

  <main id="main">
    <!-- Mission -->
    <section class="py-20 bg-white">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="mx-auto max-w-3xl text-center">
          <span class="inline-flex items-center gap-2 rounded-full bg-emerald-50 px-3 py-1 text-sm font-medium text-emerald-700">Mission</span>
          <h2 class="mt-5 text-3xl sm:text-4xl font-bold text-gray-900">Bridge treatment and independence — the right way</h2>
          <p class="mt-4 text-gray-700">Our mission is simple: provide clean, safe, sober homes with real structure so men can rebuild their lives without chaos. No excuses. No enabling. Just clear standards and support that works.</p>
        </div>
      </div>
    </section>

    <!-- Values -->
    <section class="bg-gray-50 py-16">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="grid grid-cols-1 gap-6 md:grid-cols-4">
          <article class="rounded-2xl border border-gray-200 bg-white p-7 shadow-sm"><h3 class="text-lg font-semibold text-gray-900">Respect</h3><p class="mt-2 text-gray-700">Dignity for every resident. Clean houses, calm environment, and zero drama.</p></article>
          <article class="rounded-2xl border border-gray-200 bg-white p-7 shadow-sm"><h3 class="text-lg font-semibold text-gray-900">Responsibility</h3><p class="mt-2 text-gray-700">Curfew, chores, meetings. Standards are clear and enforced fairly.</p></article>
          <article class="rounded-2xl border border-gray-200 bg-white p-7 shadow-sm"><h3 class="text-lg font-semibold text-gray-900">Honesty</h3><p class="mt-2 text-gray-700">Straight talk. If something’s not working, we fix it.</p></article>
          <article class="rounded-2xl border border-gray-200 bg-white p-7 shadow-sm"><h3 class="text-lg font-semibold text-gray-900">Service</h3><p class="mt-2 text-gray-700">We help each other. Community isn’t a slogan — it’s required.</p></article>
        </div>
      </div>
    </section>

    <!-- Our approach -->
    <section class="bg-white py-20">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="grid grid-cols-1 gap-10 lg:grid-cols-3">
          <div class="lg:col-span-1">
            <span class="inline-flex items-center gap-2 rounded-full bg-emerald-50 px-3 py-1 text-sm font-medium text-emerald-700">Approach</span>
            <h2 class="mt-5 text-3xl sm:text-4xl font-bold text-gray-900">How we run our homes</h2>
            <p class="mt-4 text-gray-700">This isn’t a free‑for‑all. It’s a stable, structured environment where men can rebuild — with accountability and support.</p>
          </div>
          <div class="lg:col-span-2 grid grid-cols-1 sm:grid-cols-2 gap-6">
            <article class="rounded-2xl border border-gray-200 bg-white p-7 shadow-sm"><h3 class="text-lg font-semibold text-gray-900">Structure</h3><p class="mt-2 text-gray-700">Curfew, quiet hours, house meetings, and a chore system that actually gets done.</p></article>
            <article class="rounded-2xl border border-gray-200 bg-white p-7 shadow-sm"><h3 class="text-lg font-semibold text-gray-900">Accountability</h3><p class="mt-2 text-gray-700">Random drug/alcohol testing, attendance checks, and clear consequences.</p></article>
            <article class="rounded-2xl border border-gray-200 bg-white p-7 shadow-sm"><h3 class="text-lg font-semibold text-gray-900">Privacy & safety</h3><p class="mt-2 text-gray-700">HIPAA‑conscious intake and secure handling of personal information.</p></article>
            <article class="rounded-2xl border border-gray-200 bg-white p-7 shadow-sm"><h3 class="text-lg font-semibold text-gray-900">Real life skills</h3><p class="mt-2 text-gray-700">Budgeting, job support, transportation planning, and community integration.</p></article>
          </div>
        </div>
      </div>
    </section>

    <!-- Leadership (placeholders) -->
    <section class="bg-gray-50 py-20">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="mx-auto mb-10 max-w-3xl text-center">
          <span class="inline-flex items-center gap-2 rounded-full bg-emerald-50 px-3 py-1 text-sm font-medium text-emerald-700">Leadership</span>
          <h2 class="mt-5 text-3xl sm:text-4xl font-bold text-gray-900">People who keep standards high</h2>
          <p class="mt-3 text-gray-700">Our team combines lived experience with professional management. No nonsense.</p>
        </div>
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
          {Array.from({ length: 3 }).map((_, i) => (
            <article class="rounded-2xl border border-gray-200 bg-white p-7 shadow-sm text-center">
              <div class="mx-auto h-24 w-24 rounded-full bg-gradient-to-br from-emerald-100 to-teal-100 border border-gray-200"></div>
              <h3 class="mt-4 font-semibold text-gray-900">Team Member {i + 1}</h3>
              <p class="text-sm text-gray-600">House Management</p>
              <p class="mt-2 text-sm text-gray-700">Bio coming soon.</p>
            </article>
          ))}
        </div>
      </div>
    </section>

    <!-- Standards & Safety -->
    <section class="bg-white py-20">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="grid grid-cols-1 gap-10 md:grid-cols-2">
          <div>
            <h2 class="text-2xl sm:text-3xl font-bold text-gray-900">Standards that don’t budge</h2>
            <ul class="mt-5 space-y-3 text-gray-700">
              <li class="flex gap-3"><svg class="mt-1 h-5 w-5 text-emerald-600" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.704 5.29a1 1 0 010 1.414l-7.5 7.5a1 1 0 01-1.414 0l-3-3a1 1 0 111.414-1.414l2.293 2.293 6.793-6.793a1 1 0 011.414 0z" clip-rule="evenodd"/></svg>Zero‑tolerance for drugs and alcohol</li>
              <li class="flex gap-3"><svg class="mt-1 h-5 w-5 text-emerald-600" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.704 5.29a1 1 0 010 1.414l-7.5 7.5a1 1 0 01-1.414 0l-3-3a1 1 0 111.414-1.414l2.293 2.293 6.793-6.793a1 1 0 011.414 0z" clip-rule="evenodd"/></svg>Curfew, quiet hours, and house meetings</li>
              <li class="flex gap-3"><svg class="mt-1 h-5 w-5 text-emerald-600" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.704 5.29a1 1 0 010 1.414l-7.5 7.5a1 1 0 01-1.414 0l-3-3a1 1 0 111.414-1.414l2.293 2.293 6.793-6.793a1 1 0 011.414 0z" clip-rule="evenodd"/></svg>Random testing and attendance checks</li>
              <li class="flex gap-3"><svg class="mt-1 h-5 w-5 text-emerald-600" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.704 5.29a1 1 0 010 1.414l-7.5 7.5a1 1 0 01-1.414 0l-3-3a1 1 0 111.414-1.414l2.293 2.293 6.793-6.793a1 1 0 011.414 0z" clip-rule="evenodd"/></svg>Routine safety and cleanliness inspections</li>
            </ul>
            <p class="mt-4 text-sm text-gray-500">Full handbook provided at intake. Standards are clear and enforced consistently.</p>
          </div>
          <div>
            <h2 class="text-2xl sm:text-3xl font-bold text-gray-900">Privacy & compliance</h2>
            <ul class="mt-5 space-y-3 text-gray-700">
              <li class="flex gap-3"><svg class="mt-1 h-5 w-5 text-emerald-600" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.704 5.29a1 1 0 010 1.414l-7.5 7.5a1 1 0 01-1.414 0l-3-3a1 1 0 111.414-1.414l2.293 2.293 6.793-6.793a1 1 0 011.414 0z" clip-rule="evenodd"/></svg>HIPAA‑conscious intake and records handling</li>
              <li class="flex gap-3"><svg class="mt-1 h-5 w-5 text-emerald-600" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.704 5.29a1 1 0 010 1.414l-7.5 7.5a1 1 0 01-1.414 0l-3-3a1 1 0 111.414-1.414l2.293 2.293 6.793-6.793a1 1 0 011.414 0z" clip-rule="evenodd"/></svg>Confidential communication with providers (with releases)</li>
              <li class="flex gap-3"><svg class="mt-1 h-5 w-5 text-emerald-600" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.704 5.29a1 1 0 010 1.414l-7.5 7.5a1 1 0 01-1.414 0l-3-3a1 1 0 111.414-1.414l2.293 2.293 6.793-6.793a1 1 0 011.414 0z" clip-rule="evenodd"/></svg>Clear incident reporting and follow‑up</li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <!-- FAQ (tight) -->
    <section class="bg-gray-50 py-20">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="mx-auto mb-10 max-w-3xl text-center">
          <span class="inline-flex items-center gap-2 rounded-full bg-emerald-50 px-3 py-1 text-sm font-medium text-emerald-700">FAQ</span>
          <h2 class="mt-5 text-3xl sm:text-4xl font-bold text-gray-900">Straight answers</h2>
        </div>
        <div class="mx-auto max-w-3xl space-y-3">
          <details class="group rounded-xl border border-gray-200 bg-white p-5 open:shadow-sm"><summary class="flex cursor-pointer list-none items-center justify-between gap-4"><h3 class="font-semibold text-gray-900">Are you a treatment center?</h3><svg class="h-5 w-5 text-gray-500 group-open:rotate-45 transition" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M12 5v14M5 12h14"/></svg></summary><p class="mt-3 text-gray-700">No. We provide sober living housing and structure. We coordinate with providers as needed.</p></details>
          <details class="group rounded-xl border border-gray-200 bg-white p-5"><summary class="flex cursor-pointer list-none items-center justify-between gap-4"><h3 class="font-semibold text-gray-900">What does rent include?</h3><svg class="h-5 w-5 text-gray-500 group-open:rotate-45 transition" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M12 5v14M5 12h14"/></svg></summary><p class="mt-3 text-gray-700">A bed in a shared room, utilities, laundry, furnished common areas, and house supplies.</p></details>
          <details class="group rounded-xl border border-gray-200 bg-white p-5"><summary class="flex cursor-pointer list-none items-center justify-between gap-4"><h3 class="font-semibold text-gray-900">Do you accept MAT?</h3><svg class="h-5 w-5 text-gray-500 group-open:rotate-45 transition" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M12 5v14M5 12h14"/></svg></summary><p class="mt-3 text-gray-700">Yes, when prescribed and monitored by a licensed provider. Med storage per policy.</p></details>
        </div>

        <!-- FAQ schema -->
        <script type="application/ld+json">{JSON.stringify({
          '@context': 'https://schema.org',
          '@type': 'FAQPage',
          mainEntity: [
            { '@type': 'Question', name: 'Are you a treatment center?', acceptedAnswer: { '@type': 'Answer', text: 'No. We provide sober living housing and structure. We coordinate with providers as needed.' } },
            { '@type': 'Question', name: 'What does rent include?', acceptedAnswer: { '@type': 'Answer', text: 'A bed in a shared room, utilities, laundry, furnished common areas, and house supplies.' } },
            { '@type': 'Question', name: 'Do you accept MAT?', acceptedAnswer: { '@type': 'Answer', text: 'Yes, when prescribed and monitored by a licensed provider. Med storage per policy.' } }
          ]
        })}</script>
      </div>
    </section>

    <!-- Final CTA -->
    <section class="bg-emerald-900 py-20 text-white">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
        <h2 class="text-3xl sm:text-4xl font-bold">Want straight answers about opening or move‑in?</h2>
        <p class="mt-4 text-emerald-100/90">Call or send a message. We’ll tell you exactly how it is.</p>
        <div class="mt-8 flex flex-col items-center justify-center gap-4 sm:flex-row">
          <a href={PHONE_TEL} class="group inline-flex items-center justify-center rounded-xl bg-white px-7 py-4 font-semibold text-emerald-900 shadow-lg shadow-emerald-900/20 transition hover:-translate-y-0.5 hover:shadow-xl"><svg class="mr-2 h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true"><path stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M22 16.92v3a2 2 0 01-2.18 2A19.79 19.79 0 013 5.18 2 2 0 015 3h3a2 2 0 012 1.72c.12.9.3 1.77.54 2.61a2 2 0 01-.45 2.11L9 10a16 16 0 007 7l.56-1.09a2 2 0 012.11-.45c.84.24 1.71.42 2.61.54A2 2 0 0122 16.92z"/></svg>Call {PHONE_DISPLAY}</a>
          <a href="/contact" class="inline-flex items-center justify-center rounded-xl border border-emerald-300/40 bg-white/5 px-7 py-4 font-semibold text-white backdrop-blur transition hover:bg-white/10">Send message</a>
        </div>
      </div>
    </section>
  </main>

  <!-- Sticky mobile call bar -->
  <div class="fixed bottom-3 inset-x-3 z-40 sm:hidden">
    <a href={PHONE_TEL} class="flex items-center justify-center gap-2 rounded-xl bg-emerald-600 px-4 py-3 text-base font-semibold text-white shadow-lg shadow-emerald-900/20">
      <svg class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M22 16.92v3a2 2 0 01-2.18 2A19.79 19.79 0 013 5.18 2 2 0 015 3h3a2 2 0 012 1.72c.12.9.3 1.77.54 2.61a2 2 0 01-.45 2.11L9 10a16 16 0 007 7l.56-1.09a2 2 0 012.11-.45c.84.24 1.71.42 2.61.54A2 2 0 0122 16.92z"/></svg>
      Call {PHONE_DISPLAY}
    </a>
  </div>

  <!-- AboutPage schema + Organization basics -->
  <script type="application/ld+json">{JSON.stringify({
    '@context': 'https://schema.org',
    '@type': 'AboutPage',
    name: 'About — NewBridge Living',
    url: 'https://newbridgeliving.example/about',
    breadcrumb: { '@type': 'BreadcrumbList', itemListElement: [ { '@type': 'ListItem', position: 1, name: 'Home', item: 'https://newbridgeliving.example/' }, { '@type': 'ListItem', position: 2, name: 'About', item: 'https://newbridgeliving.example/about' } ] },
    mainEntity: { '@type': 'Organization', name: 'NewBridge Living', areaServed: 'Tallahassee, FL', telephone: '+1-850-555-4673' }
  })}</script>
</BaseLayout>

<style>
  .line-clamp-3{display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}
</style>
